<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html">

    <p:menu toggleable="true">
        <p:submenu label="Listado">
            <p:menuitem value="Personal" action="#{gestorGeneral.regresarPaginaPrincipal()}" icon="fa fa-list" update="formContenido"/>
            <p:menuitem value="Proyectos" action="#{gestorProyecto.initListarProyectos()}" icon="fa fa-list" update="formContenido"/>
            <p:menuitem value="Contratos" action="#{gestorContrato.initListarContratos()}" icon="fa fa-list" update="formContenido"/>
            <p:menuitem value="Artículos" action="#{gestorArticulo.initListarArticulos()}" icon="fa fa-list" update="formContenido"/>
            <p:menuitem value="Convenios" action="#{gestorConvenio.initListarConvenios()}" icon="fa fa-list" update="formContenido"/>
            <p:menuitem value="Tesis" action="#{gestorTesis.initListarTesis()}" icon="fa fa-list" update="formContenido"/>
            <p:menuitem value="Pasantías" action="#{gestorPasantia.initListarPasantias()}" icon="fa fa-list" update="formContenido"/>
        </p:submenu>
        <p:submenu label="Nuevo" rendered="#{gestorUsuario.puedeAgregar}">
            <p:menuitem value="Persona" action="#{gestorPersona.initCrearPersona()}" icon="fa fa-plus" update="formContenido"/>
            <p:menuitem value="Proyecto" action="#{gestorProyecto.initCrearProyecto()}" icon="fa fa-plus" update="formContenido"/>
            <p:menuitem value="Contrato" action="#{gestorContrato.initCrearContrato()}" icon="fa fa-plus" update="formContenido"/>
            <p:menuitem value="Artículo" action="#{gestorArticulo.initCrearArticulo()}" icon="fa fa-plus" update="formContenido"/>
            <p:menuitem value="Convenio" action="#{gestorConvenio.initCrearConvenio()}" icon="fa fa-plus" update="formContenido"/>
            <p:menuitem value="Tesis" action="#{gestorTesis.initCrearTesis()}" icon="fa fa-plus" update="formContenido"/>            
            <p:menuitem value="Pasantía" action="#{gestorPasantia.initCrearPasantia()}" icon="fa fa-plus" update="formContenido"/>
        </p:submenu>
    </p:menu>
    <p:panel style="margin-top: 15px">
        <h:panelGroup layout="block" rendered="#{gestorUsuario.logeado}">
            <p:outputLabel value="Sesión iniciada como: #{gestorUsuario.usuarioActual.usuario}"/>
            <br/>
            <p:commandButton value="Cerrar sesión" action="#{gestorUsuario.logout()}" update="formMenu formContenido"/>
        </h:panelGroup>
        <h:panelGrid columns="1" rendered="#{!gestorUsuario.logeado}">
            <p:outputLabel value="Usuario"/>
            <p:inputText id="txtUser" value="#{gestorUsuario.usuario}" size="12" maxlength="50"/>
            <p:outputLabel value="Contraseña"/>
            <p:password id="txtPass" widgetVar="pass" value="#{gestorUsuario.password}" size="12" maxlength="255"/>
            <p:commandButton value="Login" disabled="#{gestorUsuario.bloquearLogin}" action="#{gestorUsuario.login()}" update="formMenu formContenido"/>
            <p:poll interval="60" autoStart="false" update="formMenu formContenido" oncomplete="PF('pollEnable').stop()" widgetVar="pollEnable" listener="#{gestorUsuario.pollComplete()}"/>
        </h:panelGrid>
    </p:panel>   
</ui:composition>